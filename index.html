<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SimNation - Active Lots and Players</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            margin: 0;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: #0056b3;
        }

        /* Container holding both tables */
        .tables-container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }

        /* Individual table styles */
        .table-wrapper {
            width: 50%;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            overflow: hidden; /* Ensure content doesn't spill out */
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 10px;
            border-bottom: 1px solid #eee;
            text-align: left;
        }

        th {
            background-color: #007bff;
            color: white;
        }

        /* Scrolling table body */
        .scrollable-table {
            display: block;
            max-height: 400px; /* Adjust to fit your design */
            overflow-y: auto;
        }

        .scrollable-table table {
            width: 100%;
        }

        .scrollable-table tbody {
            display: block;
            max-height: 400px;
            overflow-y: auto;
        }

        .scrollable-table thead, .scrollable-table tbody tr {
            display: table;
            width: 100%;
            table-layout: fixed;
        }

        .scrollable-table th, .scrollable-table td {
            width: 50%;
        }

        /* Rewards section styling */
        #rewards {
            margin-top: 30px;
            text-align: center;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .tables-container {
                flex-direction: column;
            }

            .table-wrapper {
                width: 100%;
            }
        }
    </style>
    <script>
        async function loadPlayers() {
            try {
                const response = await fetch('https://api.allorigins.win/get?url=' + encodeURIComponent('http://simnation.ddns.net:9000/userapi/avatars/online'));
                const data = await response.json();
                const jsonData = JSON.parse(data.contents);

                const playersContainer = document.getElementById('players');
                playersContainer.innerHTML = ''; // Clear previous content
                
                let tableHtml = `
                    <div class="scrollable-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Sim</th>
                                <th>Location</th>
                            </tr>
                        </thead>
                        <tbody>`;

                jsonData.avatars.forEach((avatar, index) => {
                    const sim = avatar.name;
                    const location = avatar.lot_id === 0 ? 'Unknown' : avatar.location;
                    tableHtml += `
                        <tr>
                            <td>${sim}</td>
                            <td>${location}</td>
                        </tr>`;
                });

                tableHtml += `
                        </tbody>
                    </table>
                    </div>`;

                playersContainer.innerHTML = tableHtml; // Update the container with the table
            } catch (error) {
                console.error('Error loading players:', error);
                document.getElementById('players').innerHTML = 'Error loading players.';
            }
        }

        async function loadLots() {
            // Similar logic for loading active lots
        }

        window.onload = function() {
            loadPlayers();
            loadLots();
        };
    </script>
</head>
<body>
    <h1>SimNation - Active Lots and Players</h1>
    <div id="tempoSim" style="text-align: center;">Loading time...</div>

    <div class="tables-container">
        <div id="players" class="table-wrapper">
            <!-- Players table will be loaded here -->
        </div>

        <div id="lots" class="table-wrapper">
            <!-- Lots table will be loaded here -->
        </div>
    </div>

    <div id="rewards">
        <h3>Current Rewards</h3>
        <!-- Rewards table will be loaded here -->
    </div>
</body>
</html>
